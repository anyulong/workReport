define("bui/mainlayout",['bui/common','bui/overlay'],function(require){var BUI=require('bui/common');var mainlayout=BUI.Component.Controller.extend({renderUI:function(){var _self=this;_self._initLayout();_self._setLeftBar();},bindUI:function(){var _self=this;var el=_self.get("el");if(_self.get("leftWidth")!="0"){$(".layout-left",el).mouseenter(function(ev){_self._setCenterWidth();}).mouseleave(function(ev){_self._setCenterWidth();});if(_self.get("resize")==true){$(".layout-left-bar1",el).on("click",function(){_self._show();});$(".layout-left-bar2",el).on("click",function(){_self._hide();});}}$(window).on("resize",function(ev){_self._setContentHeight();_self._setContentWidth();if(_self.get("leftWidth")!="0"){_self._setCenterWidth();}});},_initLayout:function(){var _self=this;var el=_self.get("el");el.parent("body").addClass("bui-mainlayout-viewport");_self._setTopHeight();_self._setLeftWidth();_self._setContentHeight();if(_self.get("leftWidth")!="0"){_self._setContentWidth();_self._setCenterWidth();}},_setLeftBar:function(){var _self=this;var el=_self.get("el");if(_self.get("leftWidth")!="0"&&_self.get("resize")==true){$(".layout-content",el).append(_self.get("leftbarTpl"));$(".layout-content",el).append(_self.get("leftbbarTpl"));}},_setTopHeight:function(){var _self=this,el=_self.get("el");var topHeight=_self.get("topHeight");$(".layout-top",el).css("height",topHeight+"px");},_setLeftWidth:function(){var _self=this,el=_self.get("el");var leftwidth=_self.get("leftWidth");$(".layout-left",el).css("width",leftwidth+"px");},_setContentWidth:function(){var _self=this,el=_self.get("el");var windowWidth=BUI.viewportWidth();var centerWidth=windowWidth;el.css("width",windowWidth);$(".layout-content",el).css({"width":centerWidth+"px"});},_setContentHeight:function(){var _self=this,el=_self.get("el");var windowHeight=BUI.viewportHeight();var topHeight=_self.get("topHeight");var centerHeight=windowHeight-parseInt(topHeight);var topHeight=_self.get("topHeight");el.css("height",windowHeight);$(".layout-content",el).css({"height":centerHeight+"px","padding-top":topHeight+"px"});},_setCenterHeight:function(){var _self=this,el=_self.get("el");var topHeight=_self.get("topHeight");var windowHeight=BUI.viewportHeight();var centerHeight=windowHeight-parseInt(topHeight);$(".layout-center",el).css("height",centerHeight+"px");},_setCenterWidth:function(){var _self=this,el=_self.get("el");if(_self.get("leftWidth")!="0"){if($(".layout-left:visible",el).length){var leftWidth=_self.get("leftWidth");var windowWidth=BUI.viewportWidth();var centerWidth=windowWidth-parseInt(leftWidth);$(".layout-center",el).css({"width":centerWidth+"px","margin-left":leftWidth+"px"});}else{var bar1width=$(".layout-left-bar1",el).width();var windowWidth=BUI.viewportWidth();var centerWidth=windowWidth-bar1width;$(".layout-center",el).css({"width":centerWidth+"px","margin-left":bar1width+"px"});}}else{var windowWidth=BUI.viewportWidth();var centerWidth=windowWidth;$(".layout-center",el).css({"width":centerWidth+"px"});}},_show:function(){var _self=this;var el=_self.get("el");$(".layout-left",el).show();$(".layout-left-bar2",el).show();$(".layout-left-bar1",el).hide();_self._setCenterWidth();},_hide:function(){var _self=this;var el=_self.get("el");$(".layout-left",el).hide();$(".layout-left-bar2",el).hide();$(".layout-left-bar1",el).show();_self._setCenterWidth();}},{ATTRS:{layoutTopCls:{value:'layout-top'},layoutContentCls:{value:'layout-content'},layoutLeftCls:{value:'layout-left'},layoutCenterCls:{vaue:'layout-center'},topHeight:{value:"60"},leftWidth:{value:"0"},resize:{value:false},leftbarTpl:{value:'<div class="layout-left-bar1"><span class="icon-arrow-right icon-white"></span></div>'},leftbbarTpl:{value:'<div class="layout-left-bar2"><span class="icon-arrow-left icon-white"></span></div>'},loadingTpl:{value:'<div class="bui-loading-mask" style="width: 100%; left: 0px; top: 0px; height: 100%; position: fixed;"></div>'}}});return mainlayout;});